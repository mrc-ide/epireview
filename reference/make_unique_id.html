<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ensure that each article gets a unique id across all tables — make_unique_id • epireview</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Ensure that each article gets a unique id across all tables — make_unique_id"><meta name="description" content="Ensure that each article gets a unique id across all tables"><meta property="og:description" content="Ensure that each article gets a unique id across all tables"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epireview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/epireview_overview.html">epireview</a></li>
    <li><a class="dropdown-item" href="../articles/load-filter-view-epidata.html">load-filter-view-epidata</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/epireview/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Ensure that each article gets a unique id across all tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/epireview/blob/main/R/make_unique_id.R" class="external-link"><code>R/make_unique_id.R</code></a></small>
      <div class="d-none name"><code>make_unique_id.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Ensure that each article gets a unique id across all tables</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_unique_id</span><span class="op">(</span><span class="va">articles</span>, <span class="va">df</span>, <span class="va">df_name</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-articles">articles<a class="anchor" aria-label="anchor" href="#arg-articles"></a></dt>
<dd><p>A dataframe with the articles table</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A dataframe with the table that needs to be checked for duplicate
covidence ids. Both articles and df will be loaded through
<code><a href="load_epidata.html">load_epidata</a></code>.</p></dd>


<dt id="arg-df-name">df_name<a class="anchor" aria-label="anchor" href="#arg-df-name"></a></dt>
<dd><p>A the name of the df that will be loaded through
<code><a href="load_epidata.html">load_epidata</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe with the same structure as df, but with unique ids for
each covidence id.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In some instances, an article is associated with more than one id in the
parameters, models, or outbreaks tables.
This can lead to unexpected failures because we use the id to join the
articles with other dataframes. This function will resolve the issue by
first checking if a covidence id is mapped to more than one id. If it is, we
replace one of the two ensuring that the same id is used across
articles, models, outbreaks, and parameters. This function is not expected to
be used directly by the user, but is called by <code><a href="load_epidata.html">load_epidata</a></code>. Hence
checks on arguments are not implemented.</p>
    </div>
    <div class="section level2">
    <h2 id="need-for-article-ids">Need for article ids<a class="anchor" aria-label="anchor" href="#need-for-article-ids"></a></h2>


<p>Why do we need article ids in the first place? Why not use covidence id?
To ease the process of data extraction, we created a separate database for
each extractor, with the goal of then merging the databases into a single
database. Within each individual database, the different dataframes are linked
by Access generated primary keys. These keys are unique to each database,
but are not unique across databases. To merge the databases, we therefore
generate a unique id for each article using <code><a href="https://rdrr.io/pkg/ids/man/random_id.html" class="external-link">random_id</a></code>.
Note that we cannot use covidence id for merging tables within each database
because covidence id is only present in the articles table.</p>
    </div>
    <div class="section level2">
    <h2 id="why-does-an-article-end-up-with-multiple-ids-">Why does an article end up with multiple ids? <a class="anchor" aria-label="anchor" href="#why-does-an-article-end-up-with-multiple-ids-"></a></h2>


<p>Articles that have been extracted by two extractors will have multiple ids.
In principle, this should not be a problem because as extractors resolve
differences in data extracted, they generate a consensus entry by deleting
one of the entries so that only one of the two ids should enter back into the
database when the resolved entries are merged with the rest of the data.
However, in practice, while resolving conflicts for multiple parameters or
models, extractors may delete the row with Id1 in one case and the row with
Id2 in another case. This can lead to the same article having multiple ids
in parameters, models, or outbreaks.
Because an article that has been double extracted will have been aasigned two
ids, it is also possible that the retained id in articles is not the same as
the retained id in parameters, models, or outbreaks. This can lead to rows
in parameters, models, or outbreaks that are not linked to any article.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rebecca Nash, Christian Morgenstern, Cosmo Santoni, Sangeeta Bhatia, Richard Sheppard, Joseph Hicks, Gina Cuomo-Dannenburg, Ruth McCabe, Kelly McCain, Joshua Lambert, Anne Cori, Thomas Rawson, Patrick Doohan, Tristan Naidoo, Shazia Ruybal-Pesántez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

